


<!DOCTYPE html>
<html lang="English">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NodeJs server [ Hayden&#39;s Journal ]</title>
  <meta name="baidu-site-verification" content="86burbRUA2" />
  <meta name="google-site-verification" content="OGzkUO2d_kRU2zpchWHwmxb_a-laYsIlpZ8TFBNkegg" />
  
    
      <link rel="stylesheet" href="/css/hhy.css">
    
      <link rel="stylesheet" href="/css/default.css">
    
      <link rel="stylesheet" href="/css/bootstrap.css">
    
      <link rel="stylesheet" href="/css/bootstrap-grid.css">
    
  


    <!-- Custom Fonts -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">
    
  
            
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>
<body>


<div id="menu-outer">

  <div id="menu-inner">
    
    

    <nav class="navbar navbar-expand-lg navbar-light ">
      <a class="navbar-brand" href="#"> Hayden's Journal </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          
            <li><a class="nav-item nav-link " href="/">Home</a></li>
          
            <li><a class="nav-item nav-link " href="/archives">Archives</a></li>
          
            <li><a class="nav-item nav-link " href="http://heyao.art/#/about">Heyao.art</a></li>
          
          

        </div>
      </div>
    </nav>
    <!-- nav -->  
  </div>
</div>

<div id="content-outer" class="container-fluid">
  <div id="content-inner" class="row">
    

<div id="post-container" class="col-sm-12 col-md-10 offset-md-0">
	<div class="col-12"><h1 class="holder" >&nbsp</h1></div>
	
	
	<div class="row">
		
		
		<div id="post-head" class="col-12 col-md-3 m-sm-0 mr-md-5  d-md-inline-block">
			<h1 class="article-title">NodeJs server</h1>
			<span class="article-tags">
				 
					

<a class="post-tag" href="/tags/Web/">Web</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/JavaScript/">JavaScript</a>


			</span>
			<div class="post-list-box col p-0 m-0">
				<div class="col-sm-12 p-0">
	<div class="col-12"><h1 class="holder" >&nbsp</h1></div>
	
	<div id="post-list" class=" col-md-12 d-none d-sm-block mt-3 p-0">
		
		
		<h2 class="col-sm-10 float-left">All post</h2>
		<ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/10/21/Grab-idea-from-free-drawing/">Grab idea from free drawing</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/21/generated-Rose/">generated Rose</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/05/what-is-the-abstract-reality/">what is the abstract reality</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/21/generated-Geometrics/">generated Geometrics</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/03/mondrian-and-neoplasticism/">mondrian and neoplasticism</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/20/city-upon-cities/">city upon cities</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/20/futurism-and-fascism/">futurism and fascism</a></li></ul>
		<div id="post-list-more" class="col-12"><a  href="/archives">More</a></div>
	</div>
</div>
	
			</div>
		</div>

		<article id="post" class="rounded-bottom col-12 col-md  offset-md-0 p-0 ">
		  <div class="col-sm-12 col-md">
		  	<h1 id="Using-NodeJS-to-serve-with-Visualisation-on-Web"><a href="#Using-NodeJS-to-serve-with-Visualisation-on-Web" class="headerlink" title="Using NodeJS to serve with Visualisation on Web"></a>Using NodeJS to serve with Visualisation on Web</h1><p>This article focus on Web and HTTP technique at first, because in current stage Iâ€™m learning how to collect and sort data. In next article I will show the method I combine data with visuals in my work.</p>
<p>å†™äº†ä¸ªå¼€å¤´,æˆ‘å†³å®šè¿˜æ˜¯ç”¨ä¸­æ–‡å†™.æ¯•ç«Ÿå¾ˆå¤šä¸œè¥¿æˆ‘è‡ªå·±éƒ½ä¸æ‡‚.</p>
<h2 id="åŸºæœ¬é˜è¿°"><a href="#åŸºæœ¬é˜è¿°" class="headerlink" title="åŸºæœ¬é˜è¿°"></a>åŸºæœ¬é˜è¿°</h2><p>ä»Šå¤©æ‰€æœ‰äººéƒ½ä½¿ç”¨äº’è”ç½‘,ä¸è¿‡å¯èƒ½åªæœ‰å°‘æ•°äººäº†è§£å®ƒçš„åŸç†.åœ¨å¤šæ•°äººçœ¼é‡Œ,äº’è”ç½‘å¯èƒ½åªæ˜¯å¾ˆå¤šå¯ä»¥ç›¸äº’ç‚¹å‡»,é“¾æ¥çš„ç½‘é¡µ.(å®é™…ä¸Šç¡®å®å·®ä¸å¤š) ä½œä¸ºæ•°å­—è‰ºæœ¯å·¥ä½œè€…,æˆ‘åœ¨è¿›è¡Œè§†è§‰å¯è§†åŒ–é¡¹ç›®çš„æœŸé—´æ¥è§¦äº†å¤§é‡çš„ç½‘é¡µç›¸å…³çŸ¥è¯†,å¹¶ä¸”åœ¨æœªæ¥çš„å·¥ä½œä¸­,æˆ‘å¯èƒ½ä¼šæ¶‰åŠæ›´å¤šçš„ç½‘ç»œç›¸å…³æŠ€æœ¯,æ‰€ä»¥æˆ‘å¤§æ¦‚äº†äº†è§£äº†ç½‘ç»œåŸç†,ç„¶åç°åœ¨æ¥è§£é‡Šä¸€ä¸‹åŠ æ·±è‡ªå·±çš„è®¤è¯†.</p>
<p>Webçš„å…¨åæ˜¯,<strong>World Wide Web</strong>,ç›´è¯‘åº”è¯¥æ˜¯,ä¸–ç•ŒèŒƒå›´çš„ç½‘ç»œ,æˆ‘ä¸ªäººå¾ˆå–œæ¬¢ä¸‡ç»´ç½‘è¿™ä¸ªç¿»è¯‘ğŸ˜.ä¸‡ç»´ç½‘çš„ç®€å†™æ˜¯ <strong>www</strong>, æˆ‘ä»¬å¯ä»¥å‘ç°è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„ç½‘å€å¼€å¤´,ä¸‰è¾¾ä¸æºœ. åœ¨è®¨è®ºç½‘å€(åŸŸå)ä¹‹å‰,æˆ‘ä»¬ä¸èƒ½å¿˜è®°äº†å¦ä¸€ä¸ªç©æ„å„¿,å®ƒç”šè‡³åœ¨wwwä¹‹å‰,ä¸è¿‡æˆ‘ä»¬åŸºæœ¬å¾ˆå°‘æ‰‹åŠ¨è¾“å…¥å®ƒ: <strong>http://</strong>,å®ƒçš„å…¨ç§°æ˜¯ <strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®</strong>,å®ƒå‘Šè¯‰æµè§ˆå™¨ç”¨ä½•ç§æ–¹å¼å»è·å¾—ç½‘é¡µ. æ‰€ä»¥,æˆ‘ä»¬æµè§ˆç½‘é¡µçš„æ­¥éª¤æ˜¯:</p>
<p><strong>é€šè¿‡httpåè®®,è¾“å…¥åŸŸåæ¥è®¿é—®ä¸€ä¸ªæœåŠ¡å™¨,æœåŠ¡å™¨å‘é€ç½‘é¡µç»™æµè§ˆå™¨</strong></p>
<p>è¿™é‡Œæˆ‘ä»¬çŸ¥é“äº†,ä¹‹æ‰€ä»¥è¾“å…¥ç½‘å€æˆ–è€…ç‚¹å¼€é“¾æ¥åä¼šè¿›å…¥ä¸€ä¸ªé¡µé¢,æ˜¯å› ä¸ºä½ çš„æµè§ˆå™¨è®¿é—®äº†é‚£ä¸ªæœåŠ¡å™¨,æœåŠ¡å™¨åæ‰‹ç»™äº†ä½ ä¸€ä¸ªæ–°çš„é¡µé¢.æœåŠ¡å™¨æ˜¯ä»€ä¹ˆå‘¢?åœ¨æˆ‘çœ‹æ¥,æœåŠ¡å™¨å°±æ˜¯ä¸€å°24å°æ—¶ä¸å…³æœºçš„ç”µè„‘.å®ƒæ—¢ç„¶æ˜¯ç”µè„‘,å¿…ç„¶æœ‰ç¨‹åºæ¥æ‰§è¡Œå‘½ä»¤,æœ‰çš„ç¨‹åºè´Ÿè´£é€šè¿‡å¾—åˆ°çš„è¯·æ±‚,æ¥åŠæ—¶ç”ŸæˆåŠ¨æ€çš„ç½‘é¡µ;æœ‰çš„ç¨‹åºè´Ÿè´£å°†è¿™äº›ç½‘é¡µæŠ•é€ç»™æµè§ˆå™¨,å³è®©ç”¨æˆ·çœ‹è§. æ‰“ä¸ªæ¯”æ–¹å°±æ˜¯,æœåŠ¡å™¨æ˜¯ä¸€ä¸ªé¤å…,æµè§ˆå™¨(client)æ˜¯ä¸€ä¸ªé¡¾å®¢,é¡¾å®¢é€‰å¥½èœä»¥å,é€šè¿‡httpåè®®æŠŠèœå•(XMLHttpRequest)è¯·æ±‚ç»™åå°,åå°å¨å¸ˆ(å¦‚PHP,PYTHON)éšæ‰‹çƒ¹é¥ª,ç„¶åäº¤ç»™ä¼ èœå‘˜(Apache,NodeJS)æ¥åˆ†é…èœå“(HTML)ç»™é¡¾å®¢.</p>
<p>å…¶ä¸­ä¼ è¾“åè®®å’Œè¯·æ±‚æ–¹å¼éƒ½æœ‰ä¸åŒçš„å¥½å‡ ç§,æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚æ‰€ä»¥ä¸å¤šè¯´äº†.åªçœ‹æœ€åŸºæœ¬çš„.å¯¹äºæˆ‘æ¥è¯´,ä½¿ç”¨æœåŠ¡å™¨æ¥è¿›è¡Œæ•°æ®å¯è§†åŒ–çš„å¥½å¤„æ˜¯,æœåŠ¡å™¨èƒ½å‚¨å­˜å’Œè¯»å†™æ•°æ®,è¿™æœ‰åˆ©äºæˆ‘ä»¬ä½¿ç”¨çµæ´»çš„,åŠ¨æ€çš„æ•°æ®æ¥è¿›è¡Œåˆ›ä½œ.</p>
<h2 id="å¼€å§‹æ¶è®¾ç®€å•çš„æœåŠ¡å™¨"><a href="#å¼€å§‹æ¶è®¾ç®€å•çš„æœåŠ¡å™¨" class="headerlink" title="å¼€å§‹æ¶è®¾ç®€å•çš„æœåŠ¡å™¨"></a>å¼€å§‹æ¶è®¾ç®€å•çš„æœåŠ¡å™¨</h2><p>è¿›å…¥macçš„ç»ˆç«¯</p>
<pre><code>$ mkdir &lt;name&gt;   
$ cd &lt;name&gt;
</code></pre><p>è¿™ä¸€æ­¥æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹åœ¨ç”µè„‘æ ¹ç›®å½•,å¹¶ä¸”è¿›å…¥äº†å®ƒ,ä¹‹åçš„æ“ä½œéƒ½ä¼šä½œç”¨åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹å†…. ç„¶åå®‰è£…<a href="https://nodejs.org/en/" target="_blank" rel="noopener">nodeJS</a> å’Œ<a href="https://expressjs.com/" target="_blank" rel="noopener">express</a>(nodeJSæ¡†æ¶) </p>
<p>ç°åœ¨å¼€å§‹ç¼–å†™æœåŠ¡å™¨è„šæœ¬,å¹¶å‚¨å­˜æˆjsæ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•.</p>
<pre><code>let express = require(&#39;express&#39;)
let app = express()

app.get(&#39;/&#39;,(req,res)=&gt;{
    res.send(&#39;Hello,world&#39;)
})    

let server = app.listen(8081,()=&gt;{
let host = server.address().address
let port = server.address().port
console.log(`here&#39;s ${host}:${port}`);
})
</code></pre><p>é€šè¿‡éå¸¸ç®€å•çš„å‡ æ­¥,æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªWEBæœåŠ¡å™¨,å¹¶ä¸”æ‹¥æœ‰äº†ä¸€ä¸ªæœ€åŸºæœ¬çš„åŠŸèƒ½,å½“æœ‰è¯·æ±‚é“¾æ¥è¿›å®ƒçš„æ¥å£æ—¶,å®ƒä¼šå‘å‡ºå›åº”.ç°åœ¨é€šè¿‡ç»ˆç«¯å‘½ä»¤å¯åŠ¨å®ƒ.</p>
<pre><code>node &lt;name&gt;.js
</code></pre><p>ç°åœ¨,åªè¦åœ¨æµè§ˆå™¨è¾“å…¥<em>localhost:8081</em>å°±èƒ½è®¿é—®è¿™ä¸ªæœåŠ¡å™¨.8081æ˜¯è¿™ä¸ªæœåŠ¡å™¨çš„ç«¯å£,ç›®å‰çš„ç¨‹åº,åªæœ‰è®¿é—®è¿™ä¸ªç«¯å£,æœåŠ¡å™¨æ‰ä¼šå‘å‡ºå›åº”. ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ä¸‹ä¸€æ­¥çš„å·¥ä½œ,é€šè¿‡è®¿é—®å…¶ä»–å…¬å¸å¼€æ”¾çš„API,è®¿é—®å¹¶è·å¾—æ•°æ®. å› ä¸ºæˆ‘å‡†å¤‡è§‚å¯Ÿä¸ªä½“çš„åŒºåˆ«,æ‰€ä»¥æˆ‘å‡†å¤‡è·å¾—ä¸€äº›æ¨ç‰¹ä¸Šçš„post,ä¹‹åå†è¿›è¡Œè‡ªç„¶è¯­è¨€çš„åˆ†æ.</p>
<p>å…ˆå®‰è£…<a href="https://www.npmjs.com/package/twitter" target="_blank" rel="noopener">twitter for NodeJS</a>,å¯ä»¥å¾ˆæ–¹ä¾¿çš„è°ƒç”¨æ¨ç‰¹çš„API</p>
<pre><code>$ npm install twitter
</code></pre><p>+++</p>
<pre><code>var Twitter = require(&#39;twitter&#39;);

var client = new Twitter({
    consumer_key:&#39;xxx&#39;,
    consumer_secret:&#39;xxx&#39;,
    bearer_token:&#39;xxx&#39;
});

client.get(&#39;tweets/search/30day/&lt;envName&gt;.json&#39;, {&quot;query&quot;:&quot;place:London&quot;}, function(error, tweets, response) {
    res.type(&#39;json&#39;)
    res.send(tweets)
});
</code></pre><p>xxxæ‰€ä»£è¡¨çš„å¯†ç éœ€è¦è‡ªå·±å»twitteræ³¨å†Œ,å¹¶ä¸”æ–°å»ºä¸€ä¸ªappé¡¹ç›®,æ‰èƒ½è·å¾—ä»¤ç‰Œå’Œå¯†ç æ¥è®¿é—®æ¨ç‰¹çš„æœåŠ¡å™¨.ç°åœ¨æ¥è¯´ä¸€äº›client.get(url,{â€œqueryâ€:â€â€},function())ä¸­,å‚æ•°çš„æ„ä¹‰</p>
<ol>
<li><p>é“¾æ¥,å³é€šè¿‡è¿™ä¸ªé“¾æ¥å¯ä»¥è®¿é—®æ¨ç‰¹API,åœ¨æ ·ä¾‹ä¸­,æˆ‘ä½¿ç”¨çš„æ˜¯é«˜çº§æœç´¢,è¿˜æœ‰åŸºæœ¬æœç´¢çš„urlå¯ä»¥æ›´ç®€å•çš„ä½¿ç”¨.å¦‚ <em><a href="https://api.twitter.com/1.1/search/tweets.json" target="_blank" rel="noopener">https://api.twitter.com/1.1/search/tweets.json</a></em></p>
</li>
<li><p>è¯·æ±‚æ—¶å‘é€çš„æ•°æ®,é€šè¿‡è¿™äº›æ•°æ®,æ¨ç‰¹æœåŠ¡å™¨ä¼šæä¾›è¯¦ç»†çš„,ç›¸å¯¹åº”çš„æ¨æ–‡è¿‡æ¥.å…·ä½“æ ¼å¼æŸ¥çœ‹<a href="https://developer.twitter.com/en/docs/tweets/rules-and-filtering/overview/operators-by-product" target="_blank" rel="noopener">ä½œç”¨å™¨æ–‡æ¡£</a>,<a href="https://developer.twitter.com/en/docs/tweets/rules-and-filtering/overview/standard-operators" target="_blank" rel="noopener">æ ‡å‡†æœç´¢ä½œç”¨å™¨</a></p>
</li>
<li><p>å›é¦ˆå‡½æ•°, è®¾ç½®äº†å“åº”çš„ç±»å‹,å¹¶å‘é€æ•°æ®ç»™å®¢æˆ·ç«¯</p>
</li>
</ol>
<p>ä»¥ä¸Šçš„æ“ä½œå¯ä»¥ä½¿æœåŠ¡å™¨è¯·æ±‚æ¨ç‰¹APIå¹¶å¾—åˆ°å“åº”æ•°æ®ç„¶åå‘é€ç»™å®¢æˆ·ç«¯.è€Œå¦‚ä½•ä½¿æœåŠ¡å™¨å¼€å§‹è¯·æ±‚,æä¾›ä»€ä¹ˆæ ·çš„è¦æ±‚å»è¯·æ±‚å‘¢?æ­¤æ—¶æˆ‘ä»¬å°±è¦ä½¿ç”¨å‰ç«¯è„šæœ¬æ¥å‘½ä»¤å®¢æˆ·ç«¯æ¥å‘é€æ•°æ®åˆ°æœåŠ¡å™¨,å¹¶æŠŠéœ€è¦çš„è¯·æ±‚å‘é€å‡ºå»,å¾—åˆ°æƒ³è¦çš„æ•°æ®.</p>
<h2 id="æ›´å¤šçš„æœåŠ¡å™¨åŠŸèƒ½"><a href="#æ›´å¤šçš„æœåŠ¡å™¨åŠŸèƒ½" class="headerlink" title="æ›´å¤šçš„æœåŠ¡å™¨åŠŸèƒ½"></a>æ›´å¤šçš„æœåŠ¡å™¨åŠŸèƒ½</h2><pre><code>app.get(&#39;*&#39;, function(req, res) {
    res.send(&#39;error&#39;);
});
</code></pre><p>å½“æœåŠ¡å™¨è¢«è¯·æ±‚ä¸å­˜åœ¨çš„é¡µé¢æ—¶,å‘é€é”™è¯¯æé†’.</p>
<pre><code>app.all(&#39;*&#39;, function(req, res, next) {
    res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);
    res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;X-Requested-With&quot;);
    res.header(&quot;Access-Control-Allow-Methods&quot;,&quot;PUT,POST,GET,DELETE,OPTIONS&quot;);
    res.header(&quot;X-Powered-By&quot;,&#39; 3.2.1&#39;)
    res.header(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;);
    next();
});
</code></pre><p>å…è®¸è·¨åŸŸ.</p>

			</div>
			<hr class="my-5 py-5">
			<div  class="col p-2" id="disqus_thread"></div>
			<script>
			/**
			*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');
			s.src = 'https://hayden-2.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		</article>
		
	</div>
</div>

<div class="container-fluid">
	
</div>	
		


                            


  </div>
</div>
 
<div id="bottom-outer" class="container-fluid">
  <div id="bottom-inner" class="row">
    <div id="bottom-info" class="col">
       <i> For LCC MA.IVM Reflective Journal</i>
        <br>
        
        
            / <a class="" href="/">Home</a>
        
            / <a class="" href="/archives">Archives</a>
        
            / <a class="" href="http://heyao.art/#/about">Heyao.art</a>
        
        <br>
        <br>
        <p>
          Made by <a href="/about">Heyao</a> / Site by <a href="https://hexo.io/" target="_blank">HEXO</a>
        </p>
        
    </div>
  </div>
</div>


  <!-- scripts list from theme config.yml -->
  
    <script src="/js/main.js"></script>
  
    <script src="/js/jquery-3.3.1.js"></script>
  
    <script src="/js/bootstrap.js"></script>
  
    <script src="/js/md5.js"></script>
  
    <script src="/js/highlight.js"></script>
  




<!-- Custom Theme JavaScript -->


</body>
</html>
